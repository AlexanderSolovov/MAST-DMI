
<div id="layerFormDiv" title="Layers and Groups" style="visibility: hidden">

    <form class="cmxform" id="mapFrm" action="" onsubmit="return false;">
        <input type="hidden" name="Name" id="maptip_Name" value=""/>
        <input type="hidden" name="QueryExpression" id="maptip_QueryExpression" value=""  />
        <input type="hidden" name="Layer" id="maptip_Layer" value="" />
        <input type="hidden" name="Field" id="maptip_Field" value=""  />

    </form>


    <form class="cmxform" id="layerfrm" action="" onsubmit="return false;">

        <div  class="topmenu top-alt">
            <a id="layer_btnNew" class="btn02" style="display: none;" onclick="CreateEditLayerRecord(null, null, null, 'layer');"><span class="NewBTN" data-i18n="gen-new"></span></a>
            <a id="layer_btnSave" class="btn02" style="display: none;" onclick="javascript:saveLayer();"><span class="saveBTN" data-i18n="gen-save"></span></a>
            <a id="layer_btnBack" class="btn02" onclick="javascript:displayLayer();"><span class="BackBTN" data-i18n="gen-back"></span></a>

            <input type="hidden" name="MinResolution" id="MinResolution" value="0"/>
            <input type="hidden" name="MaxResolution" id="MaxResolution" value="0"/>
            <input type="hidden" name="WrapDateLine" id="WrapDateLine" value="false"/>
            <input type="hidden" name="Filter" id="Filter" value="0"/>
            <input type="hidden" name="hid-NumZoomLevels" id="hid-NumZoomLevels" value="0"/>
            <input type="hidden" name="layer_id" id="layer_id" />
            <input type="hidden" name="wfsname" value="">

        </div>

        <table id="layerTable" class="tablesorter" cellpadding="0" cellspacing="0">
            <thead>
                <tr>


                    <td colspan="8" class="project_cellpadtwo">
                        <table width="100%" cellpadding="0" cellspacing="0" class="project_table_adjust">
                            <tr>
                                <td class="project_cell_adjust styleForm">
                                    <label class="searchLbl" data-i18n="gen-search"></label>&nbsp;
                                    <input id="layer_txtSearch" value="" maxlength="30" size="30" type="text" />
                                    <button value="Submit" onclick="Refresh();" data-i18n="gen-clear"></button>
                                </td>
                            </tr>
                        </table>
                    </td>



                </tr>

                <tr>
                    <th data-i18n="gen-alias">
                        
                    </th>
                    <th data-i18n="reg-name">
                        
                    </th>

                    <th data-i18n="gen-display-name">
                        
                    </th>

                    <th data-i18n="layer-type">
                        
                    </th>
                    <th data-i18n="gen-unit">
                        
                    </th>
                    <th data-i18n="viewer-proj">
                        
                    </th>
                    <th class="no-sort">&nbsp;</th>
                    <th class="no-sort">&nbsp;</th>

                </tr>
            </thead>
            <tbody id="LayerRowData">

            </tbody>

            <tfoot>

                <tr class="tblFooter" id="layer_pagerDiv">
                    <td colspan="8">
                        <table cellpadding="1" cellspacing="1"  class="cell_margin">
                            <tr>
                                <td width="100%" class="cell_color">
                                    <table cellpadding="1" cellspacing="1" class="table_adjust">
                                        <tr>
                                            <td class="cell_adjust" >
                                                <img src="resources/scripts/tablesorter/addons/pager/icons/first.png" data-i18n="[title]gen-first" class="first"/>
                                            </td>
                                            <td class="cell_adjust" >
                                                <img src="resources/scripts/tablesorter/addons/pager/icons/prev.png" data-i18n="[title]gen-previous" class="prev"/>
                                            </td>
                                            <td class="cell_adjustone">
                                                <input type="text" class="pagedisplay" readonly="readonly"/>
                                            </td>
                                            <td class="cell_adjust" >
                                                <img src="resources/scripts/tablesorter/addons/pager/icons/next.png" data-i18n="[title]gen-next" class="next"/>
                                            </td>
                                            <td class="cell_adjust" >
                                                <img src="resources/scripts/tablesorter/addons/pager/icons/last.png" data-i18n="[title]gen-last" class="last"/>
                                            </td>
                                            <td class="cell_adjustone">
                                                <select class="pagesize">
                                                    <option selected="selected"  value="10">10</option>                    
                                                    <option value="20">20</option>
                                                </select>
                                            </td>
                                        </tr>                            
                                    </table>
                                </td>
                            </tr>                
                        </table>
                    </td>
                </tr>
            </tfoot>


        </table>

        <div id="lyrTypeDiv">
            <table id="typetbl" class="styleForm">
                <tbody id="layertypeBody">

                </tbody>
            </table>

        </div>

        <div id="layer_accordion">
            <h3><a href="#" data-i18n="gen-general"></a></h3>
            <div style="height:250px">   
                <table id="layerDetails" class="styleForm inputint">
                    <tbody id="layerGeneralBody">

                    </tbody>
                </table>	
            </div>

            <!--h3><a href="#">Style</a></h3>
            <div style="height:250px">	
            <table>
            <tbody id="layerStyleBody">
                     
            </tbody>
            </table>
            </div>-->

            <!--h3><a href="#">Filter</a></h3>
            <div style="height:250px">	
            <table>
            <tbody id="layerFilterBody">
                    
                     
            </tbody>
            </table>
            </div-->


            <h3><a href="#" data-i18n="admin-layer-field"></a></h3>
            <div style="height:250px">	
                <table class="tblStyle">

                    <thead>
                        <tr>
                            <th data-i18n="admin-field-name"></th>
                            <th data-i18n="gen-alias"></th>
                            <th data-i18n="admin-displayable"></th>
                            <th data-i18n="gen-key"></th>

                        </tr>      
                    </thead>

                    <tbody>	
                        <tr>


                            <td colspan="4" style="padding-left:540px;">
                                <a id="all" href="#" style="color: #1491FF;text-decoration: none;" onclick="javascript:toggleLayerFieldChecked(true);" data-i18n="gen-select-all"></a>
                                &nbsp;&nbsp;
                                <a id="none" href="#" style="color: #1491FF;text-decoration: none;" onclick="javascript:toggleLayerFieldChecked(false);" data-i18n="gen-deselect-all"></a>
                            </td>

                        </tr>	


                    </tbody>

                    <tbody id="layerFieldBody" class="styleForm">

                    </tbody>
                </table>
            </div>

        </div>	


        <script id="LayerStyleTemplate" type="text/x-jquery-tmpl">
            <tr class="wmsTR">
            <td data-i18n="gen-style"></td>
            <td colspan="3"><textarea spellcheck="false" name="style" id="style"  cols="118" rows="5" style="height:70px;width:700px;"></textarea></td>
            </tr>


        </script>

        <script id="LayerFilterTemplate" type="text/x-jquery-tmpl">
            <tr class="wmsTR">
            <td data-i18n="gen-filter"></td>
            <td colspan="3"><textarea spellcheck="false" name="filter" id="filter"  cols="18" rows="5" style="height:70px;width:700px;"></textarea></td>
            </tr>

        </script>



        <script id="LayerTemplate" type="text/x-jquery-tmpl">
            <tr>                     
            <td>
            ${alias}
            </td>
            <td>
            ${name}
            </td> 
            <td>
            ${displayname}
            </td>

            <td>
            ${layertype.description}
            </td>
            <td>
            {{if (unitBean)}} 		
            ${unitBean.unitEn}
            {{else}}
            n/a

            {{/if}}    
            </td>           
            <td>
            {{if (projectionBean)}} 
            ${projectionBean.projection}
            {{else}}
            n/a
            {{/if}}   
            </td>		

            <td align="center">
            <a href="javascript:CreateEditLayerRecord('${alias}', '${layertype.name}', '${url}', 'layer');"><img src="resources/images/studio/edit.png" data-i18n="[title]gen-edit" /></a>
            </td>
            <td align="center">
            <a href="javascript:deleteLayerRecord('layer/delete/${layerid}', '${alias}', 'layer');"><img src="resources/images/studio/delete.png" data-i18n="[title]gen-delete" /></a>
            </td>

            </tr>		
        </script>


        <script id="LayerTemplateLayertype" type="text/x-jquery-tmpl"> 

            <tr>


            <td class="project_cell_adjust styleForm" > 
            <label class="searchLbl" style="margin-right:10px;" data-i18n="gen-type"></label>
            {{if ($item.action == 'Create')}}  
            <select id="layertype" name="layertype" onChange="loadTemplate(this.value,'Create');">
            <option SELECTED value="" data-i18n="gen-please-select"></option>		
            {{each(i,_layerType) $item.layerTypesList}}              						
            <option  value="${_layerType.description}">${_layerType.description}</option>											
            {{/each}}           
            </select>		
            {{else}}
            <input type="textbox" name="layertype" id="layertype" value="${layertype.description}"/>
            {{/if}}       
            </td>

            </tr>


        </script>

        <script id="LayerTemplateWMSForm" type="text/x-jquery-tmpl"> 


            <tr id="urlTR">
            <td colspan="4">
            <div style="float:left;">
            <label class="lblint" style="padding:0.3em 1em 0 0" data-i18n="gen-url"></label>
            <input type="textbox" name="url" id="url" style="width:460px;" value='' />
            </div>
            <div style="float:left; margin-left:0.5em; margin-top:0.3em;">
            <a id="btnConnect" class="btn02" onclick="javascript:connect();"><span class="connectLink" data-i18n="gen-connect"></span></a>
            </div>
            <div style="clear:both; padding:0 0 0 3.2em">e.g. http://&lt;server:port&gt;/&lt;wfsserver&gt;/wfs
            <div>
            </td>

            </tr>  	


            <tr>   
            <td><label class="lblint" data-i18n="layer-name"></label></td>
            <td> 
            {{if ($item.action == 'Create')}} 
            <select id="name" name = "name" style="width:260px;" onChange="javascript:selectWFSLayerName(this.value);" >

            <option value="" data-i18n="gen-please-select"></option>	
            </select>

            {{else}}
            <input type="textbox" name="name_layer" id="name_layer" value="${name}"/>
            {{/if}}  
            </td>  

            <td><label class="lblint" data-i18n="gen-display-name"></label></td>
            <td>                      
            <input type="textbox" name="displayname" id="displayname" value="${displayname}"/>                  
            </td> 

            </tr> 


            <tr>


            <td><label class="lblint" data-i18n="gen-alias"></label></td>
            <td>                      

            {{if ($item.action == 'Create')}} 
            <input type="textbox" name="alias" id="alias" value=""/>
            <img src="resources/images/studio/search_button.png"  onclick="javascript:checkLayerExistence($('#alias').val());"/>

            {{else}}
            <input type="textbox" name="alias" id="alias" value="${alias}"/>
            {{/if}}   
            </td>    

            <td><label class="lblint" data-i18n="admin-max-extent"></label></td>
            <td><input type="textbox" name="maxextent" id="maxextent" value="${maxextent}"/>
            </td>	 
            </tr>

            <tr>

            <td><label class="lblint" data-i18n="viewer-format"></label></td>
            <td>

            <!-- {{if ($item.action == 'Create')}}  -->
            <!-- <select name="outputformat"  id="outputformat"> -->
            <!-- <option value="" data-i18n="gen-please-select"></option> -->
            <!-- </select> -->
            <!-- {{else}} -->
            <!-- <select name="outputformat.documentformat"  id="outputformat"> -->
            <!-- <option value="" data-i18n="gen-please-select"></option>   -->
            <!-- </select> -->
            <!-- {{/if}} -->
            <select name="project_outputFormat" id="project_outputFormat">
            <option  value="" data-i18n="gen-please-select"></option>         
            </select>

            </td>
            <td><label class="lblint" data-i18n="viewer-proj"></label></td>
            <td>
            <!-- {{if (projectionBean)}}		     -->
            <!-- <input type="textbox" name="projectionBean.code" id="projectionBean.code" value="${projectionBean.code}"/>  -->
            <!-- {{else}} -->
            <!-- <input type="textbox" name="projectionBean" id="projectionBean" value=""/>  -->
            <!-- {{/if}} -->
            <select name="projection_code" id = "projection_code">
            <option  value="" data-i18n="gen-please-select"></option>         
            </select>	

            </td>


            </tr>

            <tr> 
            <td><label class="lblint" data-i18n="admin-queryable"></label></td>
            <td>
            <select name="queryable" id="queryable">


            {{if (queryable)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}				
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}			

            </select> 
            </td>
            <td><label class="lblint" data-i18n="admin-editable"></label></td>
            <td>
            <select id="editable" name="editable">

            {{if (editable)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}				
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}	
            </select> 
            </td>
            </tr>


            <tr>

            <td><label class="lblint" data-i18n="admin-selectable"></label></td>
            <td>
            <select name="selectable" id="selectable">

            {{if (selectable)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}				
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}	
            </select> 
            </td>

            <td><label class="lblint" data-i18n="admin-exportable"></label></td>
            <td>
            <select name="exportable" id="exportable">

            {{if (exportable)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}				
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}	
            </select> 
            </td>

            </tr>


            <tr>
            <td><label class="lblint" data-i18n="gen-unit"></label></td>
            <td>
            <select name="layer_unit"  id="layer_unit">
            <option  value="" data-i18n="gen-please-select"></option>         			         
            </select>
            <td><label class="lblint" data-i18n="admin-min-extent"></label></td>
            <td><input type="textbox" name="minextent" id="minextent" value="${minextent}"/></td>

            </tr>


            <!-- <tr>
            <td><label class="lblint" data-i18n="admin-min-scale"></label></td>
            <td><input type="textbox" name="minscale" id="minscale" value="${minscale}"/></td>

            <td><label class="lblint" data-i18n="admin-max-scale"></label></td>
            <td><input type="textbox" name="maxscale" id="maxscale" value="${maxscale}"/></td>
            </tr>

            <tr>


            <td><label class="lblint" data-i18n="admin-zoom-levels"></label></td>
            <td><input type="textbox" name="numzoomlevels" id="numzoomlevels" value="${numzoomlevels}"/>
            </td>

            <td><label class="lblint" data-i18n="admin-buffer"></label></td>
            <td>
            {{if ($item.action == 'Create')}}
            <input type="textbox" name="buffer" id="buffer" value="0"/>
            {{else}}
            <input type="textbox" name="buffer" id="buffer" value="${buffer}"/>
            {{/if}}
            </td>



            </tr> -->

            <tr>
            <!--td>TileSize</td>
            <td>
            {{if ($item.action == 'Create')}}
            <input type="textbox" name="tilesize" id="tilesize" value="256"/>
            {{else}}
            <input type="textbox" name="tilesize" id="tilesize" value="${tilesize}"/>
            {{/if}}
            </td-->

            <td><label class="lblint" data-i18n="admin-layer-visibility"></label></td>
            <td>
            <select name="visibility" id="visibility">

            {{if (visibility)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>


            {{else}}				
            <option  SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}	
            </select> 
            </td> 
            <td><label class="lblint" data-i18n="admin-display-in-legend"></label></td>
            <td>
            <select name="displayinlayermanager" id="displayinlayermanager">

            {{if (displayinlayermanager)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>


            {{else}}				
            <option  SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}	
            </select> 
            </td>
            </tr>

            <tr>
            <td><label class="lblint" data-i18n="admin-is-baselayer"></label></td>
            <td>
            <select name="isbaselayer" id="isbaselayer">
            {{if (isbaselayer)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}				
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>


            {{/if}}


            </select>
            </td>
            <td><label class="lblint" data-i18n="admin-display-outside-ext"></label></td>
            <td>
            <select name="displayoutsidemaxextent" id="displayoutsidemaxextent">


            {{if (displayoutsidemaxextent)}}		

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}				
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>	

            {{/if}}	

            </select>
            </td>


            </tr>
            <!--
            <tr>
            <td data-i18n="admin-transition-effect"></td>
            <td>

            <select name="transitioneffect" id="transitioneffect" style="width:136px;">  	                    
            {{if (transitioneffect)}}  
            {{if (transitioneffect=="NULL")}}                                       
            <option value="NULL" SELECTED>null</option>
            <option value="Resize" >Resize</option>	

            {{else}}
            <option value="NULL" >null</option>
            <option value="Resize" SELECTED>Resize</option>	

            {{/if}}

            {{else}}
            <option value="NULL">null</option>
            <option value="Resize">Resize</option>	

            {{/if}}



            </select>
            </td>

            <td>ApiKey</td>
            <td><input type="textbox" name="apikey" id="apikey" value="${apikey}"/></td>
            </tr>
            -->
            <tr>





            <td><label class="lblint" data-i18n="res-geom-type"></label></td>
            <td> 	 
            <select id="geomtype" name = "geomtype">
            <option value="" data-i18n="gen-please-select"></option>	
            <option value="POINT">POINT</option>	
            <option value="LINESTRING">LINESTRING</option>	
            <option value="POLYGON">POLYGON</option>
            <option value="RASTER">RASTER</option>	
            </select>

            </td>

            <td><label class="lblint" data-i18n="admin-tiled"></label></td>
            <td> 	 
            <select id="tiled" name = "tiled">	 		
            <option value="true" data-i18n="gen-yes"></option>	
            <option value="false" data-i18n="gen-no"></option>		 
            </select>	  
            </td>

            <!--td>SphericalMercator</td>
            <td>
            <select name="sphericalmercator" id="sphericalmercator"  style="width:136px;">
            {{if (sphericalmercator)}}

            <option value="false" data-i18n="gen-no"></option>
            <option SELECTED value="true" data-i18n="gen-yes"></option>

            {{else}}
            <option SELECTED value="false" data-i18n="gen-no"></option>
            <option  value="true" data-i18n="gen-yes"></option>

            {{/if}}				
            </select>
            </td-->
            </tr>
        </script>



        <script id="LayerTemplateWFSForm" type="text/x-jquery-tmpl"> 
            <tr id="urlTR">
            <td colspan="4">
            <div style="float:left;">
            <label class="lblint" style="padding:0.3em 1em 0 0">URL</label>
            <input type="textbox" name="url" id="url" style="width:460px;" value='' />
            </div>
            <div style="float:left; margin-left:0.5em; margin-top:0.3em;">
            <a id="btnConnect" class="btn02" onclick="javascript:connect();">
            <span class="connectLink">Connect</span></a>
            </div>
            <div style="clear:both; padding:0 0 0 3.2em">e.g. http://&lt;server:port&gt;/&lt;wfsserver&gt;/wfs
            <div>
            </td>

            </tr>  	

            <tr>   
            {{if ($item.action == 'Create')}} 				
            <input type="hidden" name="outputformat" id="outputformat" value="GML"/>				
            {{else}}
            <input type="hidden" name="outputformat.name" id="outputformat" value="GML"/>						
            {{/if}}




            <td>Layer Name</td>
            <td> 
            {{if ($item.action == 'Create')}} 
            <select id="name" name = "name" style="width:260px;" onChange="javascript:selectWFSLayerName(this.value);">

            <option value="" data-i18n="gen-please-select"></option>	
            </select>

            {{else}}
            <input type="textbox" name="name" id="name" value="${name}"/>
            {{/if}}  
            </td>  

            <td>Display Name</td>
            <td>                      
            <input type="textbox" name="displayname" id="displayname" value="${displayname}"/>                  
            </td> 

            </tr> 

            <tr>


            <td>Alias</td>
            <td>                      
            <input type="textbox" name="alias" id="alias" value="${alias}"/>
            {{if ($item.action == 'Create')}} 
            <img src="resources/images/studio/search_button.png"  onclick="javascript:checkLayerExistence($('#alias').val());"/>

            {{else}}
            <input type="textbox" name="alias" id="alias" value="${alias}"/>
            {{/if}}  
            </td>    

            <td>MaxExtent</td>
            <td><input type="textbox" name="maxextent" id="maxextent" value="${maxextent}"/>
            </td>	 
            </tr>

            <tr>

            <td >Projection</td>
            <td>
            {{if (projectionBean)}}		    
            <input type="textbox" name="projectionBean.code" id="projectionBean.code" value="${projectionBean.code}"/> 
            {{else}}
            <input type="textbox" name="projectionBean" id="projectionBean" value=""/> 
            {{/if}}
            </td>

            <td>GeomType</td>
            <td> 	 
            <select id="" name = "">
            <option value="" data-i18n="gen-please-select"></option>	
            <option value="POINT">POINT</option>	
            <option value="LINESTRING">LINESTRING</option>	
            <option value="POLYGON">POLYGON</option>
            <option value="RASTER">RASTER</option>	
            </select>

            </td>

            </tr>

        </script>

        <script id="LayerTemplateTileForm" type="text/x-jquery-tmpl"> 

            <tr>

            {{if ($item.action == 'Create')}} 	    

            <input type="hidden" name="outputformat" id="outputformat" value="image/png"/>
            {{else}}

            <input type="hidden" name="outputformat.name" id="outputformat" value="image/png"/>
            {{/if}}

            <td>URL</td>
            <td>

            <input type="textbox" name="url" id="url" value='' style="width:300px;" />

            </td>



            </tr>  	

            <tr>
            <td>Alias</td>
            <td>                      
            <input type="textbox" name="alias" id="alias" value="${alias}"/>

            </td> 

            <td >Projection</td>
            <td>
            {{if (projectionBean)}}		    
            <input type="textbox" name="projectionBean.code" id="projectionBean.code" value="${projectionBean.code}"/> 
            {{else}}
            <input type="textbox" name="projectionBean" id="projectionBean" value=""/> 
            {{/if}}
            </td>

            </tr>

            <tr>

            <td>NumZoomLevels</td>
            <td><input type="textbox" name="numzoomlevels" id="numzoomlevels" value="${numzoomlevels}"/></td> 


            <td>MaxExtent</td>
            <td><input type="textbox" name="maxextent" id="maxextent" value="${maxextent}"/>
            </td>	 
            </tr>



        </script>



    </form>

</div>

